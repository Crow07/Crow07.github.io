function countUp(c,a,b){if(c<a){var d=new CountUp(b,c,a);if(!d.error){d.start()}else{console.error(d.error)}}}function countPV(f,e){var g=f.replace(/\/posts\//g,"").replace(/\//g,".html");var d=0;var c=f.replace(/posts\//g,"");for(var b=0;b<e.length;++b){var a=e[b][0];if(a==f||a==c||a.concat("/")==c||a.slice(a.lastIndexOf("/")+1)===g){d+=parseInt(e[b][1])}}return d}function displayPageviews(d,a){if(d===undefined){return}if($("#post-list").length>0){$(".post-preview").each(function(){var h=$(this).children("h1").children("a").attr("href");var g=countPV(h,d);if(!a){$(this).find(".pageviews").text(g)}else{var f=parseInt($(this).find(".pageviews").text());countUp(f,g,$(this).find(".pageviews").attr("id"))}})}else{if($(".post").length>0){var e=window.location.pathname;var c=countPV(e,d);if(!a){$("#pv").text(c)}else{var b=parseInt($("#pv").text());countUp(b,c,"pv")}}}}$(function(){if($(".pageviews").length>0){var a=false;$.getJSON("/norobots/pageviews.json",function(b){displayPageviews(b.rows,a);a=true});$.ajax({url:"https://your-gae.appspot.com/query?id=the_secrt_id",dataType:"jsonp",timeout:1000*3,success:function(b){displayPageviews(b.rows,a)},error:function(){console.log("Failed to get pageviews from GAE")}})}});